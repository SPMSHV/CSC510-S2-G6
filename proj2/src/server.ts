import express, { Request, Response } from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport morgan from 'morgan';\nimport { router as apiRouter } from './web/routes';\n\nexport function createServer() {\n  const app = express();\n\n  app.use(helmet());\n  app.use(cors());\n  app.use(express.json());\n  app.use(morgan('dev'));\n\n  app.get('/health', (_req: Request, res: Response) => {\n    res.json({ status: 'ok', service: 'campusbot', time: new Date().toISOString() });\n  });\n\n  const apiPrefix = process.env.API_PREFIX || '/api';\n  app.use(apiPrefix, apiRouter);\n\n  app.get('/', (_req: Request, res: Response) => {\n    res.json({ message: 'CampusBot API', health: '/health', api: apiPrefix });\n  });\n\n  app.use((req: Request, res: Response) => {\n    res.status(404).json({ error: 'Not Found', path: req.path });\n  });\n\n  return app;\n}\n